# Arbitrary Precision Base Converter #

BaseConversion is a PHP library for converting number bases, similar to PHP's
built in function `base_convert()`. However, unlike the built in function, this
library is not limited by 32 bit integers and is capable of converting numbers
of arbitrary precision. This library also supports conversion of fractions and
allows more customization in terms of number bases.

In order to optimize the conversion of large numbers, this library also employs
two different conversion strategies. In some cases, it's possible to convert
numbers simply by replacing the digits with digits from the other base (e.g.
when converting from base 2 to base 16). This is considerably faster than
the other strategy, which simply calculates the new number using arbitrary
precision integer arithmetic provided by the GMP extension.

The API documentation, which can be generated using Apigen, can be read online
at: http://kit.riimu.net/api/baseconversion/

[![Build Status](https://img.shields.io/travis/Riimu/Kit-BaseConversion.svg?style=flat)](https://travis-ci.org/Riimu/Kit-BaseConversion)
[![Coverage Status](https://img.shields.io/coveralls/Riimu/Kit-BaseConversion.svg?style=flat)](https://coveralls.io/r/Riimu/Kit-BaseConversion?branch=master)
[![Scrutinizer Code Quality](https://img.shields.io/scrutinizer/g/Riimu/Kit-BaseConversion.svg?style=flat)](https://scrutinizer-ci.com/g/Riimu/Kit-BaseConversion/?branch=master)

## Requirements ##

In order to use this library, the following requirements must be met:

  * PHP version 5.4
  * GMP extension must be enabled

## Installation ##

This library can be installed via [Composer](http://getcomposer.org/). To do
this, download the `composer.phar` and require this library as a dependency. For
example:

```
$ php -r "readfile('https://getcomposer.org/installer');" | php
$ php composer.phar require riimu/kit-baseconversion:1.*
```

Alternatively, you can add the dependency to your `composer.json` and run
`composer install`. For example:

```json
{
    "require": {
        "riimu/kit-baseconversion": "1.*"
    }
}
```

Any library that has been installed via Composer can be loaded by including the
`vendor/autoload.php` file that was generated by Composer.

It is also possible to install this library manually. To do this, download the
[latest release](https://github.com/Riimu/Kit-BaseConversion/releases/latest) and
extract the `src` folder to your project folder. To load the library, include
the provided `src/autoload.php` file.

## Usage ##

For your convenience, this library provides a single static method that can be
easily used to convert numbers. In most common cases, it works the same way
as `base_convert` does. For example:

```php
<?php

require 'vendor/autoload.php';
use Riimu\Kit\BaseConversion\BaseConverter;

echo BaseConverter::convertBase('A37334', 16, 2); // outputs: 101000110111001100110100
```

In most cases, all you need to do to use this library is to create new instance
of `BaseConverter` and use the `convert()` method to convert numbers. For
example:

```php
<?php
$converter = new Riimu\Kit\BaseConversion\BaseConverter(10, 16);
echo $converter->convert('42'); // Will output '2A'
```

The constructor arguments are the number bases used for conversion. The first
argument is the number base used by input numbers and the second is the number
based used by output numbers. For information about defining numbers bases, see
below.

Converting fractions is just as easy. For example:

```php
<?php
$converter = new Riimu\Kit\BaseConversion\BaseConverter(8, 12);
echo $converter->convert('-1337.1337'); // Will output '-513.21A0B'
```

See below for further information about how fractions and number bases are
handled.

### Fractions ###

In some cases, it is impossible to convert fractions accurately. For example,
if the number 0.1 is converted from base 3 to base 10, it equals 1/3 which is
0.3333... For cases like this, the precision used for conversion can be set
using `setPrecision()`. A positive integer of 1 or greater indicates the number
of digits in these inaccurate conversions. For example:

```php
<?php
$converter = new Riimu\Kit\BaseConversion\BaseConverter(10, 12);
$converter->setPrecision(5);
echo $converter->convert('-1337.1337') . PHP_EOL; // Outputs '-935.17304'

$converter->setPrecision(10);
echo $converter->convert('-1337.1337') . PHP_EOL; // Outputs '-935.17304A0890'

$converter->setPrecision(4);
echo $converter->convert('-1337.1337') . PHP_EOL; // Outputs '-935.1730'
```

Note that the last number is not rounded. However, by using 0 or a negative
integer as the precision, the converter will determine the number of digits
required to represent the number in at least same accuracy as the input number.
If the precision is negative, digits will be added equal to the absolute value
of the precision. The default precision is -1. For example:

```php
<?php
$converter = new Riimu\Kit\BaseConversion\BaseConverter(15, 2);
echo $converter->convert('0.A7') . PHP_EOL; // Outputs '0.101100101'

$converter->setPrecision(-3);
echo $converter->convert('0.A7') . PHP_EOL; // Outputs '0.10110010101'

$converter->setPrecision(-10);
echo $converter->convert('0.A7') . PHP_EOL; // Outputs '0.101100101010000110'
```

Note that precision parameter is ignored if the number is converted using
replacement logic as this always yields accurate results. Additionally, if the
number can be accurately represented using less digits than the indicated
precision, the resulting number won't have trailing zeros.

### Case sensitivity ###

In general, the number bases are case insensitive whenever possible. For example,
base 16 has digits 0-9A-F, which allows you to use either lower or upper case
letters for the digits. However, for bases like base 62, the characters are
case sensitive, because the number base contains both 'a' and 'A' digits and
they have different values. In numerical bases, the library prefers upper case
letters in output. This may be easily overridden by providing the digits
yourself in the constructor, for example:

```php
<?php
$converter = new Riimu\Kit\BaseConversion\BaseConverter(10, '0123456789abcdef');
echo $converter->convert('42'); // Will output '2a'
```

### Number Bases ###

When creating new instances of `BaseConverter`, the arguments can be provided as
instances of `NumberBase` or the constructor arguments passed to `NumberBase`. The
constructor argument of `NumberBase` allows you to define number bases in couple
different ways.

The easiest way is to provide a positive integer. If the integer is between 2
and 62, the characters from sequence 0-9A-Za-z are used as digits. If the number
is 64, the the number base will use the digits as defined in base64 encoding.
For other numbers equal to 256 or smaller single bytes are used with byte value
used as digit value. If the number is 257 or greater, then each digit is
represented by hash followed by the digit value. For example, in base 1028 the
number 372 is represented by "#0372".

The second way to provide a number base is to provide a string of characters.
The position of each character indicates their digit value. For example, binary
would be given as "012". Decimal would be "0123456789" and hexadecimal would be
"0123456789ABCDEF".

The third way to create a number base is to provide the digits as an array. In
the array, the index indicates the value of the digit and the value is the digit
itself. The number base is completely agnostic to the value types used in the
array. However, it is worth noting that `NumberBase` uses loose comparison to
compare digit equality.

## Credits ##

This library is copyright 2013 - 2015 to Riikka Kalliom√§ki.

See LICENSE for license and copying information.
